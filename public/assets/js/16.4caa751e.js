(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{525:function(s,a,t){"use strict";t.r(a);var e=t(6),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"执行分布式实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行分布式实例"}},[s._v("#")]),s._v(" 执行分布式实例")]),s._v(" "),t("p",[s._v("执行分布式实例过程与伪分布式模式一样，首先创建HDFS上的用户目录，命令如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("hdfs dfs -mkdir -p /user/hadoop\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Shell 命令")]),s._v(" "),t("p",[s._v("然后，在HDFS中创建一个input目录，并把“/usr/local/hadoop/etc/hadoop”目录中的配置文件作为输入文件复制到input目录中，命令如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("hdfs dfs -mkdir inputhdfs dfs -put /usr/local/hadoop/etc/hadoop/*.xml input\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Shell 命令")]),s._v(" "),t("p",[s._v("接着就可以运行 MapReduce 作业了，命令如下：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("hadoop jar /usr/local/hadoop/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" input output "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dfs[a-z.]+'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Shell 命令")]),s._v(" "),t("p",[s._v("运行时的输出信息与伪分布式类似，会显示MapReduce作业的进度，如下图所示。\n"),t("img",{attrs:{src:"http://dblab.xmu.edu.cn/blog/wp-content/uploads/2020/07/hadoop-distributed-install09.png",alt:"img"}})]),s._v(" "),t("p",[s._v("执行过程可能会有点慢，但是，如果迟迟没有进度，比如5分钟都没看到进度变化，那么不妨重启Hadoop再次测试。若重启还不行，则很有可能是内存不足引起，建议增大虚拟机的内存，或者通过更改YARN的内存配置来解决。\n在执行过程中，可以在Linux系统中打开浏览器，在地址栏输入“http://master:8088/cluster”，通过Web界面查看任务进度，在Web界面点击 “Tracking UI” 这一列的History连接，可以看到任务的运行信息，如下图所示。\n"),t("img",{attrs:{src:"http://dblab.xmu.edu.cn/blog/wp-content/uploads/2020/07/hadoop-distributed-install10.png",alt:"img"}})]),s._v(" "),t("p",[s._v("执行完毕后的输出结果如下图所示。\n"),t("img",{attrs:{src:"http://dblab.xmu.edu.cn/blog/wp-content/uploads/2020/07/hadoop-distributed-install11.png",alt:"img"}})]),s._v(" "),t("p",[s._v("最后，关闭Hadoop集群，需要在Master节点执行如下命令：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("stop-yarn.shstop-dfs.shmr-jobhistory-daemon.sh stop historyserver\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Shell 命令")]),s._v(" "),t("p",[s._v("至此，就顺利完成了Hadoop集群搭建。")])])}),[],!1,null,null,null);a.default=n.exports}}]);